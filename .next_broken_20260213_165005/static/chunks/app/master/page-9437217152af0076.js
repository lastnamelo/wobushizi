(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[287],{2435:function(e,t,r){Promise.resolve().then(r.bind(r,1637))},1637:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var n=r(7437),a=r(2265),l=r(4560),s=r(5995),i=r(4798),c=r(4807),o=r(9733),u=r(6442),d=r(5696),h=r(3941);let x=(0,u.tk)();function p(){let[e,t]=(0,a.useState)(!0),[r,p]=(0,a.useState)(0),[m,b]=(0,a.useState)(new Map),[f,v]=(0,a.useState)(""),[g,j]=(0,a.useState)("all"),[y,N]=(0,a.useState)("all"),[S,w]=(0,a.useState)("frequency"),[_,k]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{await (0,o.if)();let[e,r]=await Promise.all([(0,o.H1)(),(0,o.B9)()]),n=new Map;for(let t of e)n.set(t.character,t.status);b(n),p(r),t(!1)})().catch(e=>{k(e.message),t(!1)})},[]);let C=(0,a.useMemo)(()=>{let e=f.trim().normalize("NFKC").toLowerCase(),t=(0,h.q)(e),r=t.length>0&&/^[a-z]+$/.test(t),n=x.filter(n=>{var a,l,s,i;if(!n.character)return!1;let c=null!==(a=m.get(n.character))&&void 0!==a?a:"none",o="number"==typeof n.hsk_level?String(n.hsk_level):"unknown";if("all"!==g&&c!==g||"all"!==y&&o!==y)return!1;if(!e)return!0;let u=String(null!==(l=n.pinyin)&&void 0!==l?l:"").toLowerCase(),d=(0,h.U)(u);return r?d.some(e=>e===t):n.character.includes(e)||String(null!==(s=n.traditional_character)&&void 0!==s?s:"").includes(e)||String(null!==(i=n.alternate_characters)&&void 0!==i?i:"").includes(e)||d.some(e=>e.startsWith(t))}).map(e=>{var t;return function(e,t){let r=(0,u.V$)(e.character);return{character:(null==r?void 0:r.character)?String(r.character):e.character,status:"none"===t?void 0:t,traditional_character:e.traditional_character&&e.traditional_character!==e.character?String(e.traditional_character):"",alternate_characters:"string"==typeof e.alternate_characters?e.alternate_characters:"",pinyin:e.pinyin?String(e.pinyin):"",hsk_level:"number"==typeof e.hsk_level?e.hsk_level:null,frequency:"number"==typeof e.frequency?e.frequency:null,definition:e.definition?String(e.definition):""}}(e,null!==(t=m.get(e.character))&&void 0!==t?t:"none")}).sort((e,t)=>{var r,n,a,l;if("frequency"===S){let a=null!==(r=e.frequency)&&void 0!==r?r:Number.MAX_SAFE_INTEGER,l=null!==(n=t.frequency)&&void 0!==n?n:Number.MAX_SAFE_INTEGER;if(a!==l)return a-l}if("hsk"===S){let r=null!==(a=e.hsk_level)&&void 0!==a?a:99,n=null!==(l=t.hsk_level)&&void 0!==l?l:99;if(r!==n)return r-n}return e.character.localeCompare(t.character,"zh-Hans-CN")}),a=new Map;for(let e of n){var l,s;let t=a.get(e.character);if(!t){a.set(e.character,e);continue}let r=null!==(l=t.frequency)&&void 0!==l?l:Number.MAX_SAFE_INTEGER;(null!==(s=e.frequency)&&void 0!==s?s:Number.MAX_SAFE_INTEGER)<r&&a.set(e.character,e)}return[...a.values()]},[f,g,y,S,m]);async function E(e,t){await (0,o.m$)(e,t),b(r=>{let n=new Map(r);return n.set(e,t),n}),p(await (0,o.B9)())}return(0,n.jsxs)("main",{className:"relative mx-auto min-h-screen max-w-7xl px-4 py-10 sm:px-6",children:[(0,n.jsx)(c.v,{}),(0,n.jsx)(s.T,{}),(0,n.jsx)(i.k,{knownCount:r}),(0,n.jsx)(l.X,{active:"master"}),e?(0,n.jsx)("p",{className:"mt-6 text-center text-stone-600",children:"Loading..."}):null,e?null:(0,n.jsxs)("section",{className:"mt-6 rounded-2xl border border-line bg-white p-4 shadow-card",children:[(0,n.jsx)("h2",{className:"mb-3 text-lg font-medium text-stone-800",children:"Master List"}),(0,n.jsxs)("div",{className:"mb-4 flex flex-wrap gap-2",children:[(0,n.jsx)("input",{value:f,onChange:e=>v(e.target.value),placeholder:"Search character / pinyin / trad-alt",className:"min-w-64 flex-1 rounded-lg border border-line bg-stone-50 px-3 py-2 text-sm outline-none focus:border-stone-400"}),(0,n.jsxs)("select",{value:g,onChange:e=>j(e.target.value),className:"rounded-lg border border-line bg-stone-50 px-3 py-2 text-sm",children:[(0,n.jsx)("option",{value:"all",children:"Status: All"}),(0,n.jsx)("option",{value:"known",children:"Known"}),(0,n.jsx)("option",{value:"study",children:"Study"}),(0,n.jsx)("option",{value:"none",children:"None"})]}),(0,n.jsxs)("select",{value:y,onChange:e=>N(e.target.value),className:"rounded-lg border border-line bg-stone-50 px-3 py-2 text-sm",children:[(0,n.jsx)("option",{value:"all",children:"HSK: All"}),(0,n.jsx)("option",{value:"1",children:"HSK 1"}),(0,n.jsx)("option",{value:"2",children:"HSK 2"}),(0,n.jsx)("option",{value:"3",children:"HSK 3"}),(0,n.jsx)("option",{value:"4",children:"HSK 4"}),(0,n.jsx)("option",{value:"5",children:"HSK 5"}),(0,n.jsx)("option",{value:"6",children:"HSK 6"}),(0,n.jsx)("option",{value:"unknown",children:"HSK Unknown"})]}),(0,n.jsxs)("select",{value:S,onChange:e=>w(e.target.value),className:"rounded-lg border border-line bg-stone-50 px-3 py-2 text-sm",children:[(0,n.jsx)("option",{value:"frequency",children:"Sort: Frequency"}),(0,n.jsx)("option",{value:"hsk",children:"Sort: HSK"}),(0,n.jsx)("option",{value:"character",children:"Sort: Character"})]})]}),(0,n.jsx)("div",{className:"table-scroll",children:(0,n.jsxs)("table",{className:"w-full text-sm",children:[(0,n.jsx)("thead",{className:"sticky top-0 z-10 bg-white",children:(0,n.jsxs)("tr",{className:"text-center text-stone-500",children:[(0,n.jsx)("th",{className:"border-b border-line bg-white py-2",children:"字"}),(0,n.jsx)("th",{className:"border-b border-line bg-white py-2",children:"Pinyin"}),(0,n.jsx)("th",{className:"border-b border-line bg-white py-2",children:"Definition"}),(0,n.jsx)("th",{className:"border-b border-line bg-white py-2",children:"HSK"}),(0,n.jsx)("th",{className:"border-b border-line bg-white py-2",children:"Freq"}),(0,n.jsx)("th",{className:"border-b border-line bg-white py-2",children:"Trad / Alt"}),(0,n.jsx)("th",{className:"border-b border-line bg-white py-2",children:"Action"})]})}),(0,n.jsx)("tbody",{children:C.map(e=>{var t;return(0,n.jsxs)("tr",{className:"border-b border-stone-100 text-center",children:[(0,n.jsx)("td",{className:"py-2 text-lg",children:e.character}),(0,n.jsx)("td",{className:"py-2",children:e.pinyin||"-"}),(0,n.jsx)("td",{className:"max-w-xs py-2 text-left text-xs text-stone-700",children:e.definition||"-"}),(0,n.jsx)("td",{className:"py-2",children:(()=>{var t;let r=(0,d.LU)(e.hsk_level);return(0,n.jsx)("span",{className:"inline-block rounded-full px-2 py-0.5 text-xs text-stone-900",style:{backgroundColor:(0,d.Wq)(r),color:"#111827"},children:null!==(t=e.hsk_level)&&void 0!==t?t:"-"})})()}),(0,n.jsx)("td",{className:"py-2",children:null!==(t=e.frequency)&&void 0!==t?t:"-"}),(0,n.jsx)("td",{className:"py-2",children:(()=>{let t=new Set;if(e.traditional_character&&t.add(e.traditional_character),e.alternate_characters)for(let r of e.alternate_characters.split("|")){let e=r.trim();e&&t.add(e)}return[...t].join(" / ")||"-"})()}),(0,n.jsx)("td",{className:"py-2",children:(0,n.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,n.jsx)("button",{onClick:()=>E(e.character,"known"),className:"rounded-lg border border-line px-2 py-1 text-xs hover:bg-stone-100",children:"Set known"}),(0,n.jsx)("button",{onClick:()=>E(e.character,"study"),className:"rounded-lg border border-line px-2 py-1 text-xs hover:bg-stone-100",children:"Set study"})]})})]},e.character)})})]})}),(0,n.jsxs)("p",{className:"mt-3 text-xs text-stone-500",children:["Showing ",C.length.toLocaleString()," characters."]}),_?(0,n.jsx)("p",{className:"mt-2 text-sm text-rose-700",children:_}):null]})]})}},3941:function(e,t,r){"use strict";r.d(t,{U:function(){return s},q:function(){return l}});let n={ā:"a",á:"a",ǎ:"a",à:"a",Ā:"a",Á:"a",Ǎ:"a",À:"a",ē:"e",é:"e",ě:"e",è:"e",Ē:"e",É:"e",Ě:"e",È:"e",ī:"i",í:"i",ǐ:"i",ì:"i",Ī:"i",Í:"i",Ǐ:"i",Ì:"i",ō:"o",ó:"o",ǒ:"o",ò:"o",Ō:"o",Ó:"o",Ǒ:"o",Ò:"o",ū:"u",ú:"u",ǔ:"u",ù:"u",Ū:"u",Ú:"u",Ǔ:"u",Ù:"u",ü:"u",ǖ:"u",ǘ:"u",ǚ:"u",ǜ:"u",Ü:"u",Ǖ:"u",Ǘ:"u",Ǚ:"u",Ǜ:"u",ê:"e",Ê:"e"};function a(e){let t="";for(let a of e){var r;t+=null!==(r=n[a])&&void 0!==r?r:a}return t}function l(e){return a(e.normalize("NFKC")).normalize("NFD").replace(RegExp("\\p{Diacritic}","gu"),"").replace(/ü/g,"u").replace(/Ü/g,"u").toLowerCase().replace(/[0-9]/g,"").replace(/[^a-z]/g,"")}function s(e){return a(e.normalize("NFKC")).normalize("NFD").replace(RegExp("\\p{Diacritic}","gu"),"").replace(/ü/g,"u").replace(/Ü/g,"u").toLowerCase().replace(/[0-9]/g," ").split(/[^a-z]+/).map(e=>e.trim()).filter(Boolean)}}},function(e){e.O(0,[726,282,971,117,744],function(){return e(e.s=2435)}),_N_E=e.O()}]);