(()=>{var e={};e.id=19,e.ids=[19],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7488:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>d,pages:()=>u,routeModule:()=>p,tree:()=>c}),r(8751),r(1506),r(5866);var a=r(3191),n=r(8716),s=r(7922),l=r.n(s),i=r(5231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let c=["",{children:["bank",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,8751)),"/Users/lastnamelo/wobushizi.com/app/bank/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,1506)),"/Users/lastnamelo/wobushizi.com/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],u=["/Users/lastnamelo/wobushizi.com/app/bank/page.tsx"],d="/bank/page",h={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/bank/page",pathname:"/bank",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},96:(e,t,r)=>{Promise.resolve().then(r.bind(r,8402))},8402:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var a=r(326),n=r(7577),s=r(7259),l=r(5006),i=r(2603);function o({title:e,rows:t,emptyMessage:r,onSetKnown:s,onSetStudy:o}){let[c,u]=(0,n.useState)(""),[d,h]=(0,n.useState)("all"),[p,x]=(0,n.useState)("frequency"),m=(0,n.useMemo)(()=>{let e=new Map;for(let r of t){let t=e.get(r.character);if(!t){e.set(r.character,r);continue}let a=t.frequency??Number.MAX_SAFE_INTEGER;(r.frequency??Number.MAX_SAFE_INTEGER)<a&&e.set(r.character,{...r,alternate_characters:t.alternate_characters||r.alternate_characters,traditional_character:t.traditional_character||r.traditional_character})}let r=c.trim().normalize("NFKC").toLowerCase(),a=(0,i.q)(r),n=a.length>0&&/^[a-z]+$/.test(a);return[...e.values()].filter(e=>{if("all"!==d&&(null==e.hsk_level?"unknown":String(e.hsk_level))!==d)return!1;if(!r)return!0;let t=(e.pinyin??"").toLowerCase(),s=(0,i.U)(t),l=e.alternate_characters??"";return n?s.some(e=>e===a):e.character.includes(r)||String(e.traditional_character??"").includes(r)||l.includes(r)||s.some(e=>e.startsWith(a))||String(e.hsk_level??"").includes(r)||String(e.frequency??"").includes(r)}).sort((e,t)=>{if("frequency"===p){let r=e.frequency??Number.MAX_SAFE_INTEGER,a=t.frequency??Number.MAX_SAFE_INTEGER;if(r!==a)return r-a}if("hsk"===p){let r=e.hsk_level??99,a=t.hsk_level??99;if(r!==a)return r-a}return e.character.localeCompare(t.character,"zh-Hans-CN")})},[t,c,p,d]);return(0,a.jsxs)("section",{className:"rounded-2xl border border-line bg-white p-4 shadow-card",children:[(0,a.jsxs)("div",{className:"mb-3 flex flex-wrap items-center justify-between gap-3",children:[a.jsx("h2",{className:"text-lg font-medium text-stone-800",children:e}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[a.jsx("input",{value:c,onChange:e=>u(e.target.value),placeholder:"Search char / pinyin / trad-alt",className:"rounded-lg border border-line bg-stone-50 px-3 py-1.5 text-sm outline-none focus:border-stone-400"}),(0,a.jsxs)("select",{value:d,onChange:e=>h(e.target.value),className:"rounded-lg border border-line bg-stone-50 px-3 py-1.5 text-sm outline-none focus:border-stone-400",children:[a.jsx("option",{value:"all",children:"HSK: All"}),a.jsx("option",{value:"1",children:"HSK 1"}),a.jsx("option",{value:"2",children:"HSK 2"}),a.jsx("option",{value:"3",children:"HSK 3"}),a.jsx("option",{value:"4",children:"HSK 4"}),a.jsx("option",{value:"5",children:"HSK 5"}),a.jsx("option",{value:"6",children:"HSK 6"}),a.jsx("option",{value:"unknown",children:"HSK Unknown"})]}),(0,a.jsxs)("select",{value:p,onChange:e=>x(e.target.value),className:"rounded-lg border border-line bg-stone-50 px-3 py-1.5 text-sm outline-none focus:border-stone-400",children:[a.jsx("option",{value:"frequency",children:"Sort: Frequency"}),a.jsx("option",{value:"hsk",children:"Sort: HSK"}),a.jsx("option",{value:"character",children:"Sort: Character"})]})]})]}),a.jsx("div",{className:"table-scroll",children:(0,a.jsxs)("table",{className:"w-full border-collapse text-sm",children:[a.jsx("thead",{className:"sticky top-0 z-10 bg-white",children:(0,a.jsxs)("tr",{className:"text-center text-stone-500",children:[a.jsx("th",{className:"border-b border-line bg-white py-2",children:"字"}),a.jsx("th",{className:"border-b border-line bg-white py-2",children:"Pinyin"}),a.jsx("th",{className:"border-b border-line bg-white py-2",children:"Definition"}),a.jsx("th",{className:"border-b border-line bg-white py-2",children:"HSK"}),a.jsx("th",{className:"border-b border-line bg-white py-2",children:"Freq"}),a.jsx("th",{className:"border-b border-line bg-white py-2",children:"Trad / Alt"}),a.jsx("th",{className:"border-b border-line bg-white py-2",children:"Action"})]})}),a.jsx("tbody",{children:0===m.length?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"py-6 text-center text-stone-500",children:r})}):m.map((e,t)=>{let r=new Set;if(e.traditional_character&&r.add(e.traditional_character),e.alternate_characters)for(let t of e.alternate_characters.split("|")){let e=t.trim();e&&r.add(e)}let n=[...r].join(" / ");return(0,a.jsxs)("tr",{className:"border-b border-stone-100 text-center align-middle",children:[a.jsx("td",{className:"py-2 text-lg",children:e.character}),a.jsx("td",{className:"py-2",children:e.pinyin||"-"}),a.jsx("td",{className:"max-w-xs py-2 text-left text-xs text-stone-700",children:e.definition||"-"}),a.jsx("td",{className:"py-2",children:(()=>{let t=(0,l.LU)(e.hsk_level);return a.jsx("span",{className:"inline-block rounded-full px-2 py-0.5 text-xs text-stone-900",style:{backgroundColor:(0,l.Wq)(t),color:"#111827"},children:e.hsk_level??"-"})})()}),a.jsx("td",{className:"py-2",children:e.frequency??"-"}),a.jsx("td",{className:"py-2",children:n||"-"}),a.jsx("td",{className:"py-2",children:(0,a.jsxs)("div",{className:"flex justify-center gap-2",children:[s?a.jsx("button",{onClick:()=>s(e.character),className:"rounded-lg border border-line px-2 py-1 text-xs text-stone-700 hover:bg-stone-100",children:"Move to known"}):null,o?a.jsx("button",{onClick:()=>o(e.character),className:"rounded-lg border border-line px-2 py-1 text-xs text-stone-700 hover:bg-stone-100",children:"Move to study"}):null]})})]},`${e.character}-${e.pinyin||""}-${t}`)})})]})})]})}var c=r(6223),u=r(9883),d=r(4047),h=r(4726),p=r(4620);function x(){let[e,t]=(0,n.useState)(!0),[r,l]=(0,n.useState)({known:[],study:[]}),[i,x]=(0,n.useState)(0),[m,b]=(0,n.useState)(null),[y,g]=(0,n.useState)("character"),f=(0,n.useMemo)(()=>"character"===y?r.known:r.study,[y,r]);async function j(e,t){await (0,h.m$)(e,t),l(r=>{let a="known"===t?"study":"known",n="known"===t?"known":"study",s=r[a].find(t=>t.character===e)??[{user_id:"local-user",character:e,status:t,last_seen_at:null}].map(e=>{let t=(0,p.V$)(e.character);return{character:t?.character?String(t.character):e.character,status:e.status,traditional_character:t?.traditional_character&&t.traditional_character!==e.character?String(t.traditional_character):"",alternate_characters:"string"==typeof t?.alternate_characters?t.alternate_characters:"",pinyin:t?.pinyin?String(t.pinyin):"",hsk_level:"number"==typeof t?.hsk_level?t.hsk_level:null,frequency:"number"==typeof t?.frequency?t.frequency:null,definition:"string"==typeof t?.definition?t.definition:""}})[0];return{known:"known"===n?[...r.known.filter(t=>t.character!==e),{...s,status:"known"}]:r.known.filter(t=>t.character!==e),study:"study"===n?[...r.study.filter(t=>t.character!==e),{...s,status:"study"}]:r.study.filter(t=>t.character!==e)}}),x(await (0,h.B9)())}return(0,a.jsxs)("main",{className:"relative mx-auto min-h-screen max-w-6xl px-4 py-10 sm:px-6",children:[a.jsx(d.v,{}),a.jsx(c.T,{}),a.jsx(u.k,{knownCount:i}),a.jsx(s.X,{active:y,onSelectBankTab:e=>{g(e),window.history.replaceState(null,"",`/bank?tab=${e}`)}}),e?a.jsx("p",{className:"mt-6 text-center text-stone-600",children:"Loading..."}):null,e?null:(0,a.jsxs)("section",{className:"mt-6 text-center",children:[a.jsx(o,{title:"character"===y?"Character Bank (Known)":"Study Bank",rows:f,emptyMessage:"character"===y?"No known characters yet.":"Study queue is empty.",onSetKnown:"study"===y?e=>j(e,"known"):void 0,onSetStudy:"character"===y?e=>j(e,"study"):void 0}),m?a.jsx("p",{className:"mt-3 text-sm text-rose-700",children:m}):null]})]})}},2603:(e,t,r)=>{"use strict";r.d(t,{U:()=>l,q:()=>s});let a={ā:"a",á:"a",ǎ:"a",à:"a",Ā:"a",Á:"a",Ǎ:"a",À:"a",ē:"e",é:"e",ě:"e",è:"e",Ē:"e",É:"e",Ě:"e",È:"e",ī:"i",í:"i",ǐ:"i",ì:"i",Ī:"i",Í:"i",Ǐ:"i",Ì:"i",ō:"o",ó:"o",ǒ:"o",ò:"o",Ō:"o",Ó:"o",Ǒ:"o",Ò:"o",ū:"u",ú:"u",ǔ:"u",ù:"u",Ū:"u",Ú:"u",Ǔ:"u",Ù:"u",ü:"u",ǖ:"u",ǘ:"u",ǚ:"u",ǜ:"u",Ü:"u",Ǖ:"u",Ǘ:"u",Ǚ:"u",Ǜ:"u",ê:"e",Ê:"e"};function n(e){let t="";for(let r of e)t+=a[r]??r;return t}function s(e){return n(e.normalize("NFKC")).normalize("NFD").replace(/\p{Diacritic}/gu,"").replace(/ü/g,"u").replace(/Ü/g,"u").toLowerCase().replace(/[0-9]/g,"").replace(/[^a-z]/g,"")}function l(e){return n(e.normalize("NFKC")).normalize("NFD").replace(/\p{Diacritic}/gu,"").replace(/ü/g,"u").replace(/Ü/g,"u").toLowerCase().replace(/[0-9]/g," ").split(/[^a-z]+/).map(e=>e.trim()).filter(Boolean)}},8751:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(8570).createProxy)(String.raw`/Users/lastnamelo/wobushizi.com/app/bank/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[819,285,609],()=>r(7488));module.exports=a})();