(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5274:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c}),n(908),n(1506),n(5866);var s=n(3191),r=n(8716),a=n(7922),l=n.n(a),o=n(5231),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);n.d(t,i);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,908)),"/Users/lastnamelo/wobushizi.com/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(n.bind(n,1506)),"/Users/lastnamelo/wobushizi.com/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/lastnamelo/wobushizi.com/app/page.tsx"],u="/page",h={require:n,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8246:(e,t,n)=>{Promise.resolve().then(n.bind(n,9152))},9152:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>g});var s=n(326),r=n(7577),a=n(7259),l=n(6223),o=n(9883),i=n(4620),c=n(5006);let d=/\p{Script=Han}/u,u=(0,r.memo)(function({text:e,selected:t,known:n,onToggle:r}){return s.jsx("div",{className:"rounded-2xl border border-line bg-white p-5 shadow-card",children:s.jsx("div",{className:"whitespace-pre-wrap leading-9",children:[...e].map((e,a)=>{if(!d.test(e))return s.jsx("span",{children:e},`${e}-${a}`);let l=(0,i.V$)(e),o=(0,c.eS)(l?.hsk_level??null),u=n.has(e),h=t.has(e),x="string"==typeof l?.pinyin?l.pinyin:"";return s.jsx("span",{onClick:()=>r(e),className:`inline-block rounded px-0.5 text-2xl transition cursor-pointer ${h?"bg-slate-200":"bg-transparent hover:bg-slate-100"}`,style:{color:o},title:x||(u?"Previously known":"No pinyin"),children:e},`${e}-${a}`)})})})});var h=n(4047),x=n(4726);let p=(()=>{let e={1:0,2:0,3:0,4:0,5:0,6:0,unknown:0};for(let t of(0,i.tk)()){let n="number"==typeof t.hsk_level?t.hsk_level:null;n&&n>=1&&n<=6?e[n]+=1:e.unknown+=1}return e})();function m(e){let t=(0,i.V$)(e);return{character:t?.character?String(t.character):e,traditional_character:t?.traditional_character&&t.traditional_character!==e?String(t.traditional_character):"",alternate_characters:"string"==typeof t?.alternate_characters?t.alternate_characters:"",pinyin:t?.pinyin?String(t.pinyin):"",hsk_level:"number"==typeof t?.hsk_level?t.hsk_level:null,frequency:"number"==typeof t?.frequency?t.frequency:null,definition:t?.definition?String(t.definition):""}}function g(){let[e,t]=(0,r.useState)(!0),[n,c]=(0,r.useState)(0),[p,g]=(0,r.useState)(""),[w,v]=(0,r.useState)("input"),[j,y]=(0,r.useState)(new Set),[N,k]=(0,r.useState)([]),[S,_]=(0,r.useState)(new Set),[P,q]=(0,r.useState)(!1),[C,$]=(0,r.useState)(null),[K,H]=(0,r.useState)(null),M=(0,r.useMemo)(()=>S.size,[S]),z=(0,r.useMemo)(()=>{let e={1:0,2:0,3:0,4:0,5:0,6:0,unknown:0};for(let t of N){let n=i.V$(t)?.hsk_level;n&&n>=1&&n<=6?e[n]+=1:e.unknown+=1}return e},[N]);async function L(){$(null);try{let e=function(e){let t=new Set;for(let n of e)d.test(n)&&t.add(n);return[...t]}(p);if(0===e.length){$("No Chinese characters were found in the pasted text.");return}let t=await (0,x.FA)(e),n=new Set;for(let s of e)t.get(s)?.status==="known"&&n.add(s);let s=new Set(e.filter(e=>t.get(e)?.status!=="study"));k(e),y(n),_(s),v("review")}catch(e){$(e.message)}}async function U(){q(!0),$(null);try{await (0,x.dS)(p,N,j,S);let e=N.filter(e=>!j.has(e)&&S.has(e)).map(m),t=N.filter(e=>!S.has(e)).map(m),n=e=>{let t=new Map;for(let n of e)t.has(n.character)||t.set(n.character,n);return[...t.values()]};H({newKnown:n(e),queuedStudy:n(t)}),v("result");let s=await (0,x.B9)();c(s)}catch(e){$(e.message)}finally{q(!1)}}return(0,s.jsxs)("main",{className:"relative mx-auto min-h-screen max-w-5xl px-4 py-10 sm:px-6",children:[s.jsx(h.v,{}),s.jsx(l.T,{}),e?s.jsx("p",{className:"mt-6 text-center text-stone-600",children:"Loading..."}):null,e?null:(0,s.jsxs)(s.Fragment,{children:[s.jsx(o.k,{knownCount:n}),s.jsx(a.X,{active:"home"}),"review"===w&&N.length>0?(0,s.jsxs)("div",{className:"mx-auto mt-8 max-w-4xl",children:[s.jsx("p",{className:"mb-3 text-left text-sm text-stone-700",children:"Deselect any character you do not recognize to add to study and select unhighlighted characters you would like to move to known."}),s.jsx(f,{stats:z})]}):null,(0,s.jsxs)("section",{className:"mx-auto mt-4 max-w-4xl space-y-4",children:["input"===w?(0,s.jsxs)(s.Fragment,{children:[s.jsx("textarea",{value:p,onChange:e=>g(e.target.value),placeholder:"Paste Chinese text here...",className:"h-60 w-full rounded-2xl border border-line bg-white p-5 text-lg leading-8 outline-none shadow-card focus:border-stone-400"}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:L,className:"rounded-xl bg-stone-800 px-5 py-2.5 text-sm text-white hover:bg-stone-700",children:"Load"})})]}):null,"review"===w?(0,s.jsxs)(s.Fragment,{children:[s.jsx(u,{text:p,selected:S,known:j,onToggle:function(e){_(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})}}),(0,s.jsxs)("p",{className:"text-right text-sm text-stone-600",children:["Selected for logging: ",M," / ",N.length]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>v("input"),className:"rounded-xl border border-line px-5 py-2.5 text-sm hover:bg-white",children:"Back"}),s.jsx("button",{disabled:P,onClick:U,className:"rounded-xl bg-stone-800 px-5 py-2.5 text-sm text-white hover:bg-stone-700 disabled:opacity-60",children:P?"Logging...":"Log"})]})]}):null,"result"===w&&K?(0,s.jsxs)("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-xl text-stone-700",children:"Log complete."}),s.jsx("div",{className:"mx-auto max-w-4xl",children:s.jsx(f,{stats:z})}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{className:"rounded-2xl border border-line bg-white p-4 shadow-card",children:[s.jsx("h3",{className:"mb-3 text-base font-medium",children:"New characters logged"}),s.jsx(b,{rows:K.newKnown,empty:"No new known characters in this event."})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-line bg-white p-4 shadow-card",children:[s.jsx("h3",{className:"mb-3 text-base font-medium",children:"Characters to study"}),s.jsx(b,{rows:K.queuedStudy,empty:"No study-queued characters in this event."})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>v("review"),className:"rounded-xl border border-line px-5 py-2.5 text-sm hover:bg-white",children:"Back"}),s.jsx("button",{onClick:function(){g(""),v("input"),y(new Set),k([]),_(new Set),H(null),$(null)},className:"rounded-xl border border-line px-5 py-2.5 text-sm hover:bg-white",children:"Load another text"})]})]}):null,C?s.jsx("p",{className:"text-sm text-rose-700",children:C}):null]})]})]})}function b({rows:e,empty:t}){return 0===e.length?s.jsx("p",{className:"text-sm text-stone-500",children:t}):s.jsx("div",{className:"flex flex-wrap gap-2",children:e.map(e=>s.jsx("span",{className:"text-2xl",style:{color:(0,c.eS)(e.hsk_level)},title:e.pinyin||"No pinyin",children:e.character},e.character))})}function f({stats:e}){let t=[{label:"HSK 1",count:e[1],color:"var(--h1)"},{label:"HSK 2",count:e[2],color:"var(--h2)"},{label:"HSK 3",count:e[3],color:"var(--h3)"},{label:"HSK 4",count:e[4],color:"var(--h4)"},{label:"HSK 5",count:e[5],color:"var(--h5)"},{label:"HSK 6",count:e[6],color:"var(--h6)"},{label:"Unknown",count:e.unknown,color:"var(--h0)"}],n=Math.max(e[1]+e[2]+e[3]+e[4]+e[5]+e[6]+e.unknown,1);return s.jsx("div",{className:"rounded-xl border border-line bg-white p-3 shadow-card",style:{"--h1":"#c41d0e","--h2":"#15803d","--h3":"#1d4ed8","--h4":"#fa6f19","--h5":"#8f7bbf","--h6":"#f74f90","--h0":"#6b7280"},children:s.jsx("div",{className:"flex flex-wrap justify-center gap-5",children:t.map(e=>{let t=e.count/n*100,r="Unknown"===e.label?p.unknown:p[Number(e.label.replace("HSK ",""))];return(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-stone-600",children:[s.jsx("span",{className:"inline-block h-6 w-6 rounded-full border border-stone-300",style:{background:`conic-gradient(${e.color} ${t}%, #e7e5e4 ${t}% 100%)`}}),(0,s.jsxs)("span",{className:"flex flex-col leading-tight",style:{color:e.color},children:[s.jsx("span",{children:e.label}),(0,s.jsxs)("span",{children:["(",e.count,"/",r,")"]})]})]},e.label)})})})}},908:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});let s=(0,n(8570).createProxy)(String.raw`/Users/lastnamelo/wobushizi.com/app/page.tsx#default`)}};var t=require("../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),s=t.X(0,[819,285,609],()=>n(5274));module.exports=s})();